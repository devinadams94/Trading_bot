# Trading Bot Kubernetes Architecture

## ğŸ“ Infrastructure Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Kubernetes Cluster (trading-bot namespace)           â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        Application Layer                            â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚  Deployment: paper-trading-bot (replicas: 1-N)               â”‚  â”‚    â”‚
â”‚  â”‚  â”‚                                                               â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  Pod: paper-trading-bot-xxxxx                          â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚                                                         â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  Container: trading-bot                                â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Image: trading-bot:latest                          â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Resources: 4Gi RAM, 2 CPU (8Gi/4CPU limit)         â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ GPU: 1x NVIDIA (optional)                          â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ FastAPI Server (Port 8000)                         â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ GET /health (liveness probe)                    â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ GET /ready (readiness probe)                    â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ GET /status (detailed status)                   â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ GET /metrics (Prometheus metrics)               â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Online Learning Loop                               â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ MassiveRealtimeStream (WebSocket)               â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ PaperTradingEnvironment                         â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ OptionsCLSTMPPOAgent                            â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ ExperienceBuffer (10k experiences)              â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ Periodic training & checkpointing               â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€ Volume Mounts:                                     â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚     â”œâ”€ /models (read-only)                             â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚     â”œâ”€ /checkpoints (read-write)                       â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚     â””â”€ /logs (read-write)                              â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        Monitoring Layer                             â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚  Deployment: prometheus   â”‚  â”‚  Deployment: grafana         â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Port: 9090            â”‚  â”‚  â”œâ”€ Port: 3000               â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Storage: 50Gi         â”‚  â”‚  â”œâ”€ Storage: 10Gi            â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Retention: 30 days    â”‚  â”‚  â”œâ”€ Datasource: Prometheus   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ Scrapes: /metrics     â”‚  â”‚  â””â”€ Dashboards: Trading Bot  â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        Storage Layer                                â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚    â”‚
â”‚  â”‚  â”‚ PVC: models  â”‚  â”‚ PVC: checkptsâ”‚  â”‚ PVC: logs    â”‚             â”‚    â”‚
â”‚  â”‚  â”‚ Size: 10Gi   â”‚  â”‚ Size: 50Gi   â”‚  â”‚ Size: 20Gi   â”‚             â”‚    â”‚
â”‚  â”‚  â”‚ Access: RWO  â”‚  â”‚ Access: RWO  â”‚  â”‚ Access: RWO  â”‚             â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚    â”‚
â”‚  â”‚  â”‚ PVC: prom    â”‚  â”‚ PVC: grafana â”‚                                â”‚    â”‚
â”‚  â”‚  â”‚ Size: 50Gi   â”‚  â”‚ Size: 10Gi   â”‚                                â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        Configuration Layer                          â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚  ConfigMap: config        â”‚  â”‚  Secret: secrets             â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ SYMBOLS               â”‚  â”‚  â”œâ”€ MASSIVE_API_KEY          â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ INITIAL_CAPITAL       â”‚  â”‚  â”œâ”€ S3_ACCESS_KEY            â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ UPDATE_FREQUENCY      â”‚  â”‚  â””â”€ S3_SECRET_KEY            â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ SAVE_FREQUENCY        â”‚  â”‚                               â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ LOG_LEVEL             â”‚  â”‚                               â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        Service Layer                                â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚  Service: trading-bot     â”‚  â”‚  Service: grafana            â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  Type: ClusterIP          â”‚  â”‚  Type: LoadBalancer          â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  Port: 8000               â”‚  â”‚  Port: 3000                  â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚    â”‚
â”‚  â”‚  â”‚  Service: prometheus      â”‚                                      â”‚    â”‚
â”‚  â”‚  â”‚  Type: ClusterIP          â”‚                                      â”‚    â”‚
â”‚  â”‚  â”‚  Port: 9090               â”‚                                      â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ External Connections
                                      â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Massive.com API                â”‚
                    â”‚  â”œâ”€ WebSocket: Real-time data   â”‚
                    â”‚  â””â”€ REST: Options chain         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Data Flow

### 1. Real-time Trading Flow

```
Massive.com WebSocket
        â”‚
        â–¼
MassiveRealtimeStream
        â”‚
        â”œâ”€â–º Stock quotes (SPY, QQQ, etc.)
        â”œâ”€â–º Options trades
        â””â”€â–º Greeks updates
        â”‚
        â–¼
PaperTradingEnvironment
        â”‚
        â”œâ”€â–º Build observation vector
        â”œâ”€â–º Get current portfolio state
        â””â”€â–º Fetch options chain
        â”‚
        â–¼
OptionsCLSTMPPOAgent
        â”‚
        â”œâ”€â–º Process observation
        â”œâ”€â–º Select action (0-30)
        â””â”€â–º Return action + log_prob + value
        â”‚
        â–¼
PaperTradingEnvironment.step()
        â”‚
        â”œâ”€â–º Execute trade (buy/sell/hold)
        â”œâ”€â–º Update portfolio
        â”œâ”€â–º Calculate reward
        â””â”€â–º Return next observation
        â”‚
        â–¼
ExperienceBuffer
        â”‚
        â””â”€â–º Store (obs, action, reward, next_obs, done)
```

### 2. Online Learning Flow

```
Every UPDATE_FREQUENCY steps (default: 100)
        â”‚
        â–¼
Sample batch from ExperienceBuffer
        â”‚
        â–¼
OptionsCLSTMPPOAgent.train()
        â”‚
        â”œâ”€â–º Calculate advantages
        â”œâ”€â–º Update actor network
        â”œâ”€â–º Update critic network
        â””â”€â–º Return loss metrics
        â”‚
        â–¼
Every SAVE_FREQUENCY steps (default: 1000)
        â”‚
        â–¼
Save checkpoint to /checkpoints/
        â”‚
        â””â”€â–º Model weights, optimizer state, metrics
```

### 3. Monitoring Flow

```
Trading Bot (every 10 seconds)
        â”‚
        â”œâ”€â–º Update Prometheus metrics
        â”‚   â”œâ”€ trading_bot_portfolio_value
        â”‚   â”œâ”€ trading_bot_win_rate
        â”‚   â”œâ”€ trading_bot_trades_total
        â”‚   â””â”€ trading_bot_reward_total
        â”‚
        â–¼
Prometheus (scrape every 15 seconds)
        â”‚
        â”œâ”€â–º Store time-series data
        â””â”€â–º Evaluate alert rules
        â”‚
        â–¼
Grafana
        â”‚
        â””â”€â–º Visualize dashboards
            â”œâ”€ Portfolio value over time
            â”œâ”€ Win rate trend
            â”œâ”€ Trade distribution
            â””â”€ Reward accumulation
```

## ğŸ” Security Architecture

```
External Access
        â”‚
        â–¼
LoadBalancer (Grafana only)
        â”‚
        â–¼
Kubernetes Services (ClusterIP)
        â”‚
        â”œâ”€â–º Trading Bot (internal only)
        â”œâ”€â–º Prometheus (internal only)
        â””â”€â–º Grafana (external via LB)
        â”‚
        â–¼
Pods (with resource limits)
        â”‚
        â”œâ”€â–º Secrets mounted as env vars
        â”œâ”€â–º ConfigMaps mounted as env vars
        â””â”€â–º Network policies (optional)
```

## ğŸ“Š Resource Allocation

| Component | CPU Request | CPU Limit | Memory Request | Memory Limit | Storage |
|-----------|-------------|-----------|----------------|--------------|---------|
| Trading Bot | 2 cores | 4 cores | 4Gi | 8Gi | 80Gi (PVCs) |
| Prometheus | 500m | 1 core | 2Gi | 4Gi | 50Gi |
| Grafana | 250m | 500m | 512Mi | 1Gi | 10Gi |
| **Total** | **2.75 cores** | **5.5 cores** | **6.5Gi** | **13Gi** | **140Gi** |

## ğŸ¯ Scaling Strategy

### Horizontal Scaling (Multiple Strategies)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pod 1          â”‚  â”‚  Pod 2          â”‚  â”‚  Pod 3          â”‚
â”‚  Symbols: SPY   â”‚  â”‚  Symbols: QQQ   â”‚  â”‚  Symbols: AAPL  â”‚
â”‚  Capital: 100k  â”‚  â”‚  Capital: 100k  â”‚  â”‚  Capital: 100k  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Vertical Scaling (More Resources)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pod 1 (High Performance)       â”‚
â”‚  CPU: 8 cores                   â”‚
â”‚  Memory: 16Gi                   â”‚
â”‚  GPU: 2x NVIDIA                 â”‚
â”‚  Symbols: SPY,QQQ,AAPL,MSFT     â”‚
â”‚  Capital: 500k                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Deployment Workflow

```
Developer
    â”‚
    â”œâ”€â–º Edit code
    â”œâ”€â–º Build Docker image
    â””â”€â–º Push to registry
    â”‚
    â–¼
kubectl apply -k infra/k8s/
    â”‚
    â”œâ”€â–º Create namespace
    â”œâ”€â–º Create secrets
    â”œâ”€â–º Create configmaps
    â”œâ”€â–º Create PVCs
    â”œâ”€â–º Create deployments
    â””â”€â–º Create services
    â”‚
    â–¼
Kubernetes Scheduler
    â”‚
    â”œâ”€â–º Select node
    â”œâ”€â–º Pull image
    â”œâ”€â–º Mount volumes
    â””â”€â–º Start container
    â”‚
    â–¼
Kubelet
    â”‚
    â”œâ”€â–º Run liveness probe (/health)
    â”œâ”€â–º Run readiness probe (/ready)
    â””â”€â–º Monitor resource usage
    â”‚
    â–¼
Trading Bot Running
    â”‚
    â”œâ”€â–º Connect to Massive.com
    â”œâ”€â–º Start online learning
    â”œâ”€â–º Expose metrics
    â””â”€â–º Save checkpoints
```

## ğŸ“š File Organization

```
infra/k8s/
â”œâ”€â”€ configs/          # Configuration resources
â”‚   â”œâ”€â”€ namespace.yaml
â”‚   â”œâ”€â”€ configmap.yaml
â”‚   â””â”€â”€ secrets.yaml
â”œâ”€â”€ volumes/          # Persistent storage
â”‚   â””â”€â”€ persistent-volumes.yaml
â”œâ”€â”€ deployments/      # Application deployments
â”‚   â””â”€â”€ paper-trading-bot.yaml
â”œâ”€â”€ services/         # Service definitions
â”‚   â””â”€â”€ paper-trading-bot.yaml
â”œâ”€â”€ monitoring/       # Monitoring stack
â”‚   â”œâ”€â”€ prometheus-*.yaml
â”‚   â”œâ”€â”€ grafana-*.yaml
â”‚   â””â”€â”€ kustomization.yaml
â””â”€â”€ kustomization.yaml  # Base config
```

